
<div class="container mt-5">
  <h2>Exam Portal</h2>
  <h4>Schedule Exam</h4>

  <form (ngSubmit)="onSubmit()" #form="ngForm">
    <div class="form-group">
      <label class="form-label">Program:</label>
      <div class="form-input">
        <select class="form-control" [(ngModel)]="examForm.program" name="program" required
                #program="ngModel"  (change)="onProgramChange()">
          <option value="">Select a Program</option>
          <option *ngFor="let program of programs" [value]="program.programName">{{program.programName}}</option>
        </select>
        <div *ngIf="program.invalid && (program.dirty || program.touched)" class="text-danger">
          Program is required.
        </div>
      </div>
      <div class="form-button">
        <button type="button" class="btn btn-outline-secondary">+ Add</button>
      </div>
    </div>

    <div class="form-group ">
      <label class="col-sm-2 col-form-label">Batch:</label>
      <div class="form-input input-batch">
        <input type="text" class="form-control " [(ngModel)]="examForm.batch" name="batch" placeholder="Type here" required>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Subject:</label>
      <div class="form-input">
        <select class="form-control" [(ngModel)]="examForm.subject" name="subject" required>
          <option value="">Select a Subject</option>
          <option *ngFor="let subject of subjects" [value]="subject.name">{{subject.name}}</option>
        </select>
      </div>
      <div class="form-button">
        <button type="button" class="btn btn-outline-secondary">+ Add</button>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-2 col-form-label">Date:</label>
      <div class="col-sm-4">
        <input type="date" class="form-control form-date" [(ngModel)]="examForm.date" name="date" >
      </div>
      <label class="col-sm-2 col-form-label label-time">Time:</label>
      <div class="col-sm-4">
        <input type="time" class="form-control form-time"  [(ngModel)]="examForm.time" name="time" >
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Structure:</label>
      <div class="form-input">
        <select class="form-control" [(ngModel)]="examForm.structure" name="structure" >
          <option *ngFor="let examType of examTypes" [value]="examType.examTypeName">{{examType.examTypeName}}</option>
        </select>
      </div>
      <div class="form-button">
        <button type="button" class="btn btn-outline-secondary">+ Add</button>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Location:</label>
      <div class="form-input">
        <select class="form-control" [(ngModel)]="examForm.location" name="location" required>
          <option *ngFor="let location of locations" [value]="location">{{location}}</option>
        </select>
      </div>
      <div class="form-button">
        <button type="button" class="btn btn-outline-secondary">+ Add</button>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-sm-12 text-right">
        <button type="submit" class="btn btn-warning"> {{ editing ? 'Update Exam' : 'Schedule Exam' }}</button>
        <button
          type="button"
          class="btn btn-secondary"
          style="margin-left: 2%;"
          *ngIf="editing"
          (click)="cancelEdit()"
        >
          Cancel
        </button>

      </div>
    </div>
  </form>
 <hr style="width: 100%; height: 4px; background-color: black;">

  <table class="table">
    <thead class="thead-dark">
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Program</th>
      <th scope="col">Batch</th>
      <th scope="col">Subject</th>
      <th scope="col">Date</th>
      <th scope="col">Time</th>
      <th scope="col">Structure</th>
      <th scope="col">Location</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let exam of scheduledExams" >
      <td>{{ exam.id }}</td>
      <td>{{ exam.program }}</td>
      <td>{{ exam.batch }}</td>
      <td>{{ exam.subject }}</td>
      <td>{{ exam.date }}</td>
      <td>{{ exam.time }}</td>
      <td>{{ exam.structure }}</td>
      <td>{{ exam.location }}</td>
      <td>
        <div style="display: flex; flex-direction: row; gap: 5px ">
          <div>
          <button (click)="editExam(exam)">‚úèÔ∏è</button>
          </div>
          <div>
          <button style="background-color: crimson" (click)="deleteExam(exam.id)">üóëÔ∏è</button>
          </div>
        </div>

      </td>
    </tr>
    </tbody>

  </table>
</div>





